#!/usr/bin/env php
<?php

declare(strict_types=1);

use App\Kernel;
use Symfony\Bundle\FrameworkBundle\Console\Application;
use Symfony\Component\Console\Input\ArgvInput;
use Symfony\Component\Console\Output\ConsoleOutput;

if (!is_file(dirname(__DIR__) . '/vendor/autoload.php')) {
    throw new LogicException('Dependencies are missing. Try running "composer install".');
}

require_once dirname(__DIR__) . '/vendor/autoload.php';

$input = new ArgvInput();
$env = $input->getParameterOption(['--env', '-e'], 'dev');
$debug = '0' !== ($_SERVER['APP_DEBUG'] ?? '1') && 'prod' !== $env;

$kernel = new Kernel($env, $debug);
$application = new Application($kernel);
$application->run($input, new ConsoleOutput());

